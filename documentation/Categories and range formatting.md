# Categories and range formatting in sl-xj-lib-data
Data handling classes

About Xojo version: tested with Xojo 2024 release 4.1 on Mac.

Latest update this document: 2025-04-18


## Introduction 

The purpose is to assign a category for values in a number or integer column.

The source is example_035


For example, we may want to categorise people based on height

- from 0 to 150cm as small
- from 150cm to 195cm as average
- above 195 as tall

So, assuming we have a table with a column labeled “size”:

```xojo

var people as new clDataTable("people")
call  people.AddColumn(new clStringDataSerie("Gender"))
call  people.AddColumn(new clNumberDataSerie("Size"))
call people.AddColumn(new clNumberDataSerie("Weight"))

people.AddRow(new Dictionary("gender":"M", "Size":175.0, "Weight": 82.5))
people.AddRow(new Dictionary("gender":"F","Size":162.0, "Weight": 65.7))
…
people.AddRow(new Dictionary("gender":"F","Size":190.0, "Weight": 80.7))

```

Let’s do a first check on the number of rows per gender:


```xojo


var countPerGender as clDataTable = people.Groupby(array("gender"), "CountPeople")

```

The table generated by this groupby operation contains two columns:

- gender
- CountPeople


Let’s now apply a class on the size of people in our sample.

We use a range formatting. In order to keep the original values in the output table, we will apply the range formatting on a copy of the size column and name this column “FormattedSize”:


```xojo
var fmtcol as clAbstractDataSerie = people.AddColumn(people.GetColumn("Size").Clone("FormattedSize"))

```
Now, we can apply the range formatting. Note that since range formatting only applies to numbers, we need to alter above code as follow:

```xojo

var fmtcol as clNumberDataSerie = clNumberDataSerie(people.AddColumn(people.GetColumn("Size").Clone("FormattedSize")))

// Define the range formatting

fmtcol.SetStringFormat(new clRangeFormatting("",""))
fmtcol.AddFormattingRange(0,150.0,"small")
fmtcol.AddFormattingRange(150.1,195.0,"average")
fmtcol.AddFormattingRange(195.1,999.99,"tall")

```



